# N-Alkylpyridinium sulfonates for retention time indexing in RP-LC-MS based metabolomics

Data and scripts for retention time indexing

## Introduction



## Repository Structure

This repository contains all the data and core required to repeat the analysis
as performed in Stoffel et al. [1].

### Scripts

The different scripts that have been used for analysis are sorted in their logical
order using a running prefix in front of each script file name. All scripts rely
on different functions, which simplify the code and make it more readable. These
functions are defined in 00_setup.R If only an individual part shall be executed,
first 00_setup.R needs to be executed.

### Data folder

This folder contains all the respective data used in the analysis scripts. The
prefix numbering of the sub-folder is similar to the scripts. The individual 
files represent the input required for running the scripts and they may differ
between the individual folders since some modifications might have been 
performed (e.g. re-picking of peaks).

### Results folder

If a specific output is generated by the different scripts this is stored in a 
sub-folder with the respective prefix as the script.


## Data Analysis

Data analysis was performed in sequential steps. First retention times of all 
NAPS and substances were determined using Bruker Data Analysis.

### Indexing strategy

In the first step different strategies for indexing are compared against each 
other. Linear interpolation is performed using the <code>approx()</code> function.
To be usefull for metabolomics, a wrapper function has been implemented in the 
<code>MetaboCoreUtils</code> package. This function requires three different 
inputs. First, <code>x</code> is a <code>numeric</code> vector with the retention
times that should be indexed. Second, a <code>data.frame</code> with the columns
<code>rtime</code> and <code>rindex</code> are required. This <code>data.frame</code>
contains the retention time and indices of the used indexing substances. The last
argument is a function that is used for converting RTs to RIs. By default, linear
interpolation is used.
Two other possibilities are cubic splines or Akima cubic splines. Both have been
implemented and are available within 00_scripts.R. The functions can be used with
<code>indexRtime</code> from <code>MetaboCoreUtils</code>.
Different indexing functions can lead to different results for the RI. For the 
measured standards, always one injection of NAPS before and after the block of 
standards was measured. The three different indexing functions were combined with
three different ways of using the bracketing NAPS injections. Either the NAPS
injection before, after or the average RT of both was used. Comparing within one
function, the use the NAPS before, after or their average had no significant
influence. Therefore, the averaging method was used throughout the data analysis.
However, the use of the different functions has a significant influence. Especially,
for the lower retention times large differences are observed due to the different
fitting of the individual functions. However, for larger retention times the
differences are only marginal.

### Variation of flow rate



## Literature

[1] Stoffel et al., bioRxiv
